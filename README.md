# Laravel project + mongodb
## Эндпоинты
Все есть в коллекции. При регистрации/логине получаем токен, который используем для авторизации во всех остальных запросах.

## Usage
Для запуска проекта нам понадобится докер.

1. Собираем все контейнеры с помощью команды - docker compose up -d

2. Устанавливаем зависимости composer в контейнере app - composer install

3. Проводим миграции в контейнере app - php artisan migrate:fresh --seed

## Project
Основная логика по эндпоинтам находится в сервисах+контроллерах.

При создании нового Device срабатывает DeviceObserver для создания соответствующей записи в таблице с состояниями.

Планировщик SwitchDeviceState срабатывает каждую минуту при запуске воркера.

Созданная artisan команда WatchDevicesState вызывается при вводе "states:watch"
